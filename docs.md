# XMSleepX 文档

## 项目概述

XMSleepX 是一个使用 Flutter 开发的助眠应用，支持多平台（Android、iOS、鸿蒙 OHOS、Linux 等）。

## 项目结构

```
lib/
├── main.dart                 # 应用入口
├── config/
│   └── theme.dart            # 主题配置
├── models/
│   └── sound.dart            # 声音模型
├── services/
│   ├── audio_service.dart    # 音频播放服务
│   └── storage_service.dart  # 数据存储服务
└── ui/
    ├── home/                 # 首页
    ├── player/               # 播放页面
    ├── settings/             # 设置页面
    └── favorites/            # 收藏页面
```

## 已完成功能

### ✅ 基础框架
- Flutter 项目初始化
- Material 3 主题支持（亮色/暗色）
- 多平台支持配置

### ✅ 首页
- 分类筛选（全部、自然、环境、白噪音）
- 声音卡片网格布局
- 底部导航栏

### ✅ 播放功能
- 音频播放控制
- 音量调节
- 播放速度调节
- 循环播放

### ✅ 数据存储
- Hive 本地存储
- 用户偏好设置
- 收藏管理

### ✅ 设置页面
- 主题切换（跟随系统/浅色/深色）
- 循环播放开关
- 睡眠定时

## 待实现功能

### 🔄 音频资源
- [ ] 添加真实音频文件到 assets/sounds/
- [ ] 实现本地音频加载
- [ ] 支持在线音频流

### 🔄 播放增强
- [ ] 多声音混音播放（同时播放多个声音）
- [ ] 音量单独控制每个声音
- [ ] 播放列表管理
- [ ] 睡眠定时器功能

### 🔄 用户体验
- [ ] 动画效果（页面转场、图标动画）
- [ ] 震动反馈
- [ ] 深色模式自动切换

### 🔄 数据统计
- [ ] 播放历史记录
- [ ] 使用时长统计
- [ ] 常用声音推荐

### 🔄 其他
- [ ] 国际化支持（中英文）
- [ ] 隐私政策页面
- [ ] 应用内购买

## 运行命令

```bash
# 安装依赖
flutter pub get

# 运行调试版本
flutter run

# 构建 APK
flutter build apk --release

# 构建鸿蒙应用
flutter build hap --release
```

## 依赖配置

主要依赖：
- `audioplayers` - 音频播放（鸿蒙适配版本）
- `hive_ce` / `hive_ce_flutter` - 本地存储
- `shared_preferences` - 用户偏好设置（鸿蒙适配版本）

## 开发计划

### 阶段一：核心功能（进行中）
1. 添加音频资源
2. 实现混音播放
3. 完善播放控制

### 阶段二：用户体验
1. 添加动画效果
2. 优化界面设计
3. 添加震动反馈

### 阶段三：功能扩展
1. 播放历史统计
2. 国际化支持
3. 应用内购买
